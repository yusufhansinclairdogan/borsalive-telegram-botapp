:root{
  --bg:#ffffff; --fg:#0f172a; --muted:#64748b; --panel:#f1f5f9; --line:#e2e8f0ac;
  --brand:#4920dcf5; --bid:#10b981; --ask:#ef4444; --shadow:0 8px 30px rgba(0,0,0,.15);
  --glass: rgba(255,255,255,.45); --glass-line: rgba(15,23,42,.12);
  --t-cols: 90px 110px 110px 1fr 1fr;
}
.dark{
  --bg:#0b1220; --fg:#e5e7eb; --muted:#94a3b8; --panel:rgba(255,255,255,.06);
  --line:rgba(255,255,255,.18); --shadow:0 8px 30px rgba(32,41,82,.55);
  --glass: rgba(255,255,255,.06); --glass-line: rgba(255,255,255,.12);
}
*{box-sizing:border-box}
html,body{height:100%}
body{ margin:0; background:var(--bg); color:var(--fg);
  font:14px/1.35 system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial;
  padding-bottom:env(safe-area-inset-bottom);
}
.wrap{max-width:980px;margin:0 auto;padding:12px 12px 16px}

/* Header */
.header{
  display:flex;align-items:center;justify-content:space-between;
  background:var(--panel); border:1px solid var(--line);
  border-radius:16px; padding:10px 12px; box-shadow:var(--shadow); margin-bottom:10px;
}
.brand{display:flex;align-items:center;gap:10px}
.brand img{width:28px;height:28px;border-radius:8px;opacity:.9}
.brand .title{font-weight:800;font-size:20px;letter-spacing:.2px;display:flex;gap:8px;align-items:baseline;flex-wrap:wrap}
.brand .title .sym{color:var(--brand)}
.hl-last{font-weight:800}
.hl-diff{font-weight:700}

/* CANLI + tema */
.controls{display:flex;align-items:center}
.badge{
  display:flex;align-items:center;gap:6px;border-radius:12px;
  border:1px solid rgba(16,185,129,.35); background:rgba(16,185,129,.12);
  color:#10b981; padding:6px 10px; font-weight:600
}
.badge .dot{width:9px;height:9px;border-radius:50%;background:#ef4444;animation:blink-dot 1.1s infinite}
.off .dot{opacity:.25}
.theme-switch{ position: relative; width: 58px; height: 30px; padding: 0; border: none; border-radius: 999px; margin-left:10px;
  background: linear-gradient(180deg, #000000, #c8c8c8); cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}
.dark .theme-switch{ background: linear-gradient(180deg, #ffd677, #eeeeee); border: 1px solid rgba(255,255,255,.08); }
.theme-switch .knob{ position:absolute; top:4px; left:4px; width:24px; height:24px; border-radius:999px; background:#ffffff; transition: transform .25s ease, background .25s ease; box-shadow: 0 4px 12px rgba(0,0,0,.25); }
.dark .theme-switch .knob{ transform: translateX(28px); background:#0b1220; }

/* status + search */
.status-row{ display:flex;align-items:center;justify-content:space-between; gap:12px; margin-bottom:8px; font-size:14px; }
:root{ --search-bg:#e2e8f0; --search-border:#cbd5e1; --search-inp-bg:#ffffff; }
.dark :root, .dark{ --search-bg:#1f2937; --search-border:#334155; --search-inp-bg:#0b1220; }
.search{ position:relative; flex:0 0 auto; width:38px; height:38px; display:flex; align-items:center; justify-content:center; }
.search-btn{ width:38px;height:38px;border-radius:999px; background:var(--search-bg);
  border:1px solid var(--search-border); color:var(--muted); display:grid; place-items:center; cursor:pointer; position:relative; }
.search-btn .dot{ position:absolute; right:6px; top:6px; width:6px;height:6px;border-radius:50%; background:#09ff00; }
.search-input{ position:absolute; right:0; height:40px; width:0; opacity:0; pointer-events:none; border-radius:999px; border:1px solid var(--search-border);
  background:var(--search-inp-bg); color:var(--fg); padding:0 12px 0 38px; font-size:14px; outline:none; transition: width .22s ease, opacity .16s ease; }
.search.open{ width:260px; } .search.open .search-input{ width:100%; opacity:1; pointer-events:auto; } .search.open .search-btn{ position:absolute; left:0.5px; z-index:2; }
@keyframes blink-dot { 0%,100% { opacity:1 } 50% { opacity:.3 } }
.blink{ animation: blink-dot 1s infinite; }

/* Snapshot */
.snapshot{ border:1px solid var(--glass-line); border-radius:16px; box-shadow:var(--shadow); background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.02)); margin-bottom:10px; }
.dark .snapshot{ background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03)); }
.snap-toggle{
  width:100%; text-align:left; padding:.7rem .9rem; background:transparent; border:0; color:var(--fg);
  display:flex; align-items:center; justify-content:space-between; font-weight:800; cursor:pointer;
}
.snap-toggle .chev{ transition:transform .2s ease; }
.snap-body{ padding:.6rem .75rem .9rem; display:none; }
.snap-body.open{ display:block; }

.snap-grid{
  display:grid; grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); gap:.6rem;
}
.snap-grid > div{
  min-width:0; padding:.52rem .58rem; border-radius:12px; border:1px solid var(--glass-line);
  background:var(--glass); backdrop-filter: blur(8px);
  display:flex; flex-direction:column; gap:.22rem; align-items:flex-start;
}
.snap-grid span{ font-size:.78rem; color:var(--muted); white-space:nowrap; }
.snap-grid strong{ font-size:1.02rem; font-weight:800; }
.snap-grid .pos strong{ color:var(--bid) }
.snap-grid .neg strong{ color:var(--ask) }
.snap-grid .amb strong{ color:#f59e0b }

/* depth */
.tableWrap{ border:1px solid var(--line); border-radius:16px; overflow:hidden; box-shadow:var(--shadow); position:relative; }
.empty-overlay{ position:absolute; inset:0; display:grid; place-items:center; font-weight:700; background:transparent; z-index:1; }
table.depth{ width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed }
thead th{ background:var(--panel); text-align:left; padding:10px 12px; font-weight:700; border-bottom:1px solid var(--line) }
tbody td{ padding:10px 12px; border-bottom:1px solid var(--line); vertical-align:middle; }
tbody tr:nth-child(odd){ background:rgba(0,0,0,.02) }
.dark tbody tr:nth-child(odd){ background:rgba(255,255,255,.03) }
.num{text-align:right} .meta{color:var(--muted)} .bid{color:var(--bid);font-weight:700} .ask{color:var(--ask);font-weight:700}
.flash-green{ background:rgba(16,185,129,.18); animation:flash .6s ease-in-out 1 }
.flash-red{ background:rgba(239, 68, 68,.22); animation:flash .6s ease-in-out 1 }
@keyframes flash{ 0%{filter:brightness(1.6)} 100%{filter:brightness(1)} }

/* trades */
.trades-card { margin-top: 12px; border: 1px solid rgba(120,130,140,.25); border-radius: 16px; overflow: hidden; background: rgba(0,0,0,.03) }
.dark .trades-card { background: rgba(255,255,255,.04); border-color: rgba(255,255,255,.08) }
.trades-head { padding:.6rem .9rem; font-weight:700; font-size:.95rem; background:rgba(0,0,0,.04) }
.dark .trades-head { background:rgba(255,255,255,.06) }
.trades-title { text-align:center; margin-bottom:.35rem; }
.trades-head-grid{ display:grid; grid-template-columns: var(--t-cols); gap:.5rem; padding:0 .2rem; opacity:.85; font-weight:600; }
.trades-head-grid > div{ text-align:center; white-space:nowrap; }
.trades-body{ max-height:280px; overflow:auto; scrollbar-width:thin; scrollbar-color: rgba(255,255,255,.18) transparent }
.trades-list { list-style:none; margin:0; padding:0 }
.trades-list>li { border-top:1px solid rgba(120,130,140,.18) }
.trades-list>li:first-child { border-top:0 }
.dark .trades-list>li { border-color: rgba(255,255,255,.08) }
.trade-row{ display:grid !important; grid-template-columns: var(--t-cols); gap:.5rem; align-items:center; padding:.5rem .75rem; box-sizing:border-box; }
.trade-row .c{ text-align:center; white-space:nowrap; font-variant-numeric: tabular-nums; }
.trade-row.buy .c-price,.trade-row.buy .c-qty,.trade-row.buy .c-buyer,.trade-row.buy .c-seller{ color: var(--bid); }
.trade-row.sell .c-price,.trade-row.sell .c-qty,.trade-row.sell .c-buyer,.trade-row.sell .c-seller{ color: var(--ask); }
.trades-empty{ padding:.75rem; text-align:center; opacity:.85; font-weight:600; }

/* responsive */
@media (max-width: 380px){
  :root { --t-cols: 78px 90px 90px 1fr 1fr; }
  .snap-grid{ grid-template-columns: repeat(auto-fit, minmax(100px,1fr)); }
  .snap-grid strong{ font-size:.96rem; }
}
footer{ margin-top:12px; color:var(--muted); font-size:12px; text-align:center; }
